(program (programItem (section REMAP { (sectionBody (conditional (ifStatement if (condition (expression (term (factor (comparison (comparable inbound.url.query.version) == (value "v2")))))) (block { (blockItem (statement inbound.req.X-API-Version = (value "v2") ;)) })))) (sectionBody (conditional (ifStatement if (condition (expression (term (factor (comparison (comparable from.url.query.source) == (value "mobile")))))) (block { (blockItem (statement inbound.req.X-Source = (value "mobile") ;)) })))) (sectionBody (conditional (ifStatement if (condition (expression (term (factor to.url.query.target)))) (block { (blockItem (statement inbound.req.X-Target = (value "set") ;)) })))) })) (programItem (section SEND_REQUEST { (sectionBody (conditional (ifStatement if (condition (expression (term (factor (comparison (comparable outbound.url.query.backend) == (value "fast")))))) (block { (blockItem (statement outbound.req.X-Priority = (value "high") ;)) })))) })) (programItem (section SEND_RESPONSE { (sectionBody (statement inbound.resp.X-Query-Sub = (value "{inbound.url.query.sub}") ;)) (sectionBody (statement inbound.resp.X-From-Param = (value "{from.url.query.param}") ;)) (sectionBody (statement inbound.resp.X-To-Param = (value "{to.url.query.redirect}") ;)) })) <EOF>)
