# SOME DESCRIPTIVE TITLE.
# Copyright (C) 2015, dev@trafficserver.apache.org
# This file is distributed under the same license as the Apache Traffic
# Server package.
# FIRST AUTHOR <EMAIL@ADDRESS>, 2016.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: Apache Traffic Server 6.2\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2016-01-02 21:32+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=utf-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Generated-By: Babel 2.1.1\n"

#: ../../admin-guide/transparent-proxy/bridge.en.rst:2
msgid "Inline on a Linux Bridge"
msgstr ""

#: ../../admin-guide/transparent-proxy/bridge.en.rst:23
msgid ""
"A Linux can be configured to operate in `bridge mode "
"<http://www.linuxfoundation.org/collaborate/workgroups/networking/bridge>`_."
" Two or more physical interfaces are assigned to the bridge. A single IP "
"address is shared across the interfaces. By default any packet that "
"arrives on one interface is immediately routed out another bridge "
"interface."
msgstr ""

#: ../../admin-guide/transparent-proxy/bridge.en.rst:29
msgid "Linux packages required:"
msgstr ""

#: ../../admin-guide/transparent-proxy/bridge.en.rst:31
msgid "bridge-utils"
msgstr ""

#: ../../admin-guide/transparent-proxy/bridge.en.rst:32
msgid "ebtables"
msgstr ""

#: ../../admin-guide/transparent-proxy/bridge.en.rst:34
msgid ""
"In our example of setting up bridge mode we will use a local address of "
"192.168.1.11/24 and interfaces ``eth0`` and ``eth1`` as the bridge "
"interfaces (more detailed documentation is available `here "
"<http://www.tldp.org/HOWTO/BRIDGE-STP-HOWTO/preparing-the-"
"bridge.html>`_). You may omit the '#' character and everything after it. "
"::"
msgstr ""

#: ../../admin-guide/transparent-proxy/bridge.en.rst:49
msgid ""
"If you have not already done so, remember to add a default route, such as"
" this one for a gateway of 192.168.1.1. ::"
msgstr ""

#: ../../admin-guide/transparent-proxy/bridge.en.rst:54
msgid ""
"At this point it is a good idea to test connectivity to verify the basic "
"bridge is functional."
msgstr ""

#: ../../admin-guide/transparent-proxy/bridge.en.rst:57
msgid ""
"Once the bridge is verified to work, this is the basic traffic pattern of"
" interest."
msgstr ""

#: ../../admin-guide/transparent-proxy/bridge.en.rst:64
msgid "Picture of traffic flow through a bridge with ATS"
msgstr ""

#: ../../admin-guide/transparent-proxy/bridge.en.rst:66
msgid ""
"The green arrows are packets originating from the client and the red "
"arrows are packets originating from the origin server. All traffic not "
"directed to the local address will pass through the bridge. We need to "
"break into some of the traffic and subject it to routing so that it can "
"be routed to ATS. This requires ``ebtables``. The flows we want to "
"intercept are green 1 (from client to bridge) and red 1 (origin server to"
" bridge)."
msgstr ""

#: ../../admin-guide/transparent-proxy/bridge.en.rst:74
msgid ""
"In this example we will intercept port 80 (HTTP) traffic. We will use the"
" ``BROUTING`` chain because it is traversed only for packets that "
"originated externally and arrived on a (forwarding enabled) interface. "
"Although it looks like this will intercept all port 80 traffic it will "
"only affect the two flows described above. ``-j redirect`` marks the "
"packet as being diverted to the bridge and not forwarded, and the "
"``DROP`` target puts the packets in the normal ``iptables`` routing so "
"that we can use standard device tests on them [1]_. Although this example"
" handles only port 80, other ports are the same except for the port "
"value. Note also the port here is the port from the point of view of the "
"clients and origin servers, not the Traffic Server server port. ::"
msgstr ""

#: ../../admin-guide/transparent-proxy/bridge.en.rst:94
msgid ""
"Traffic Server operates at layer 3 so we need to use ``iptables`` to "
"handle IP packets appropriately.::"
msgstr ""

#: ../../admin-guide/transparent-proxy/bridge.en.rst:102
msgid ""
"At this point the directionality of the interfaces matters. For the "
"example ``eth1`` is the inbound (client side) interface, while ``eth0`` "
"is the outbound (origin server side) interface. We mark both flows of "
"packets so that we can use policy routing on them. For inbound packets we"
" need to use ``TPROXY`` to force acceptance of packets to foreign IP "
"addresses. For returning outbound packets there will be a socket open "
"bound to the foreign address, we need only force it to be delivered "
"locally. The value for ``--on-ip`` is 0 because the target port is "
"listening and not bound to a specific address. The value for ``--on-"
"port`` must match the Traffic Server server port. Otherwise its value is "
"arbitrary. ``--dport`` and ``--sport`` specify the port from the point of"
" view of the clients and origin servers."
msgstr ""

#: ../../admin-guide/transparent-proxy/bridge.en.rst:115
msgid ""
"Once the flows are marked we can force them to be delivered locally via "
"the loopback interface via a policy routing table.::"
msgstr ""

#: ../../admin-guide/transparent-proxy/bridge.en.rst:121
msgid ""
"The marking used is arbitrary but it must be consistent between "
"``iptables`` and the routing rule. The table number must be in the range "
"1..253."
msgstr ""

#: ../../admin-guide/transparent-proxy/bridge.en.rst:125
msgid ""
"To configure Traffic Server set the following values in "
":file:`records.config`"
msgstr ""

#: ../../admin-guide/transparent-proxy/bridge.en.rst:128
msgid ""
":ts:cv:`proxy.config.http.server_ports` *value from* ``--on-port`` (see "
"below)"
msgstr ""

#: ../../admin-guide/transparent-proxy/bridge.en.rst:130
msgid ":ts:cv:`proxy.config.reverse_proxy.enabled` ``1``"
msgstr ""

#: ../../admin-guide/transparent-proxy/bridge.en.rst:132
msgid ":ts:cv:`proxy.config.url_remap.remap_required` ``0``"
msgstr ""

#: ../../admin-guide/transparent-proxy/bridge.en.rst:134
msgid ""
"You may also need to set :ts:cv:`proxy.config.cluster.ethernet_interface`"
" to \"br0\" (the name of the bridge interface from the Bridge Commands)."
msgstr ""

#: ../../admin-guide/transparent-proxy/bridge.en.rst:138
msgid "Additional troubleshooting"
msgstr ""

#: ../../admin-guide/transparent-proxy/bridge.en.rst:140
msgid ""
"Check to make sure that ``iptables`` is not filtering (blocking) incoming"
" HTTP connections."
msgstr ""

#: ../../admin-guide/transparent-proxy/bridge.en.rst:143
msgid ""
"It is frequently the case that the default tables prevent incoming HTTP. "
"You can clear all filters with the commands::"
msgstr ""

#: ../../admin-guide/transparent-proxy/bridge.en.rst:149
msgid ""
"That is a bit drastic and should only be used for testing / debugging. A "
"live system will likely need some filters in place but that is beyond the"
" scope of this document. If this fixes the problem, then your filter set "
"is too restrictive."
msgstr ""

#: ../../admin-guide/transparent-proxy/bridge.en.rst:154
msgid ""
"Note that this problem will prevent the basic bridge (without ATS) from "
"allowing HTTP traffic through."
msgstr ""

#: ../../admin-guide/transparent-proxy/bridge.en.rst:157
msgid "Verify that IP packet forwarding is enabled."
msgstr ""

#: ../../admin-guide/transparent-proxy/bridge.en.rst:159
msgid "You can check this with::"
msgstr ""

#: ../../admin-guide/transparent-proxy/bridge.en.rst:163
msgid ""
"The output should be a non-zero value (usually '1'). If it is zero, you "
"can set it with::"
msgstr ""

#: ../../admin-guide/transparent-proxy/bridge.en.rst:168
msgid ""
"This can setting can be persisted by putting it in ``/etc/sysctl.conf``: "
"::"
msgstr ""

#: ../../admin-guide/transparent-proxy/bridge.en.rst:173
msgid "Footnotes"
msgstr ""

#: ../../admin-guide/transparent-proxy/bridge.en.rst:175
msgid ""
"The ``--redirect-target`` can be omitted, but then the ``iptables`` rules"
" would need to use ``--physdev`` instead of just ``-i``. The actual "
"packet processing is identical."
msgstr ""

